<script>
    // ... (Setup) ...
    const Bio = new ChaosBioEngine();

    function verifyBiometrics() {
        const masterJSON = localStorage.getItem('chaos_master_template');
        if(!masterJSON) { alert("Recalibrate."); window.location.href='/abyss-forge.html'; return; }
        const masterData = JSON.parse(masterJSON);

        if(loginPath.length < 10) { alert("Trace too short."); return; }

        // --- LAYER 1: IS IT HUMAN? (Bio-Engine) ---
        const isHumanScore = Bio.analyzeBiologicalMotion(loginPath);
        if(isHumanScore < 50) { failLogin("BOT MOVEMENT DETECTED"); return; }

        // --- LAYER 2: IS IT THE RIGHT SHAPE? (Vector) ---
        // (Assume Vector Logic from V258 is here)

        // --- LAYER 3: IS IT YOU? (DNA Check) ---
        const loginDNA = Bio.extractDNA(loginPath);
        const masterDNA = masterData.dnaProfile;

        // CRITICAL CHECK: DIRECTION
        if (masterDNA && loginDNA.direction !== masterDNA.direction) {
            failLogin("WRONG DIRECTION (Clockwise/CCW Mismatch)");
            return;
        }

        // CRITICAL CHECK: STYLE MATCH
        // Compare Speed Rhythm and Cornering
        const dnaScore = Bio.compareDNA(masterDNA, loginDNA); // Returns 0-100
        
        document.getElementById('stat-shape').innerText = `DNA: ${dnaScore}%`;

        // STRICT THRESHOLD
        // You need a 70% match on your OWN HABITS
        if(dnaScore >= 65) {
            // SUCCESS
            // ... (Grant Access Logic) ...
            
            // Adapt the DNA (Learn new habits slightly)
            // (Simplified adaptive logic here)
        } else {
            failLogin(`DNA MISMATCH (${dnaScore}%)\nRhythm/Speed incorrect.`);
        }
    }
    // ...
</script>
