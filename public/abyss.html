<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forge Your Callsign</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        body { background: #000; color: #00ff41; font-family: monospace; height: 100vh; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .glitch { animation: glitch 1s linear infinite; }
        @keyframes glitch {
            2%, 64% { transform: translate(2px,0) skew(0deg); }
            4%, 60% { transform: translate(-2px,0) skew(0deg); }
            62% { transform: translate(0,0) skew(5deg); }
        }
        .btn { border: 1px solid #00ff41; padding: 15px 30px; cursor: pointer; transition: all 0.2s; }
        .btn:hover { background: #00ff41; color: #000; box-shadow: 0 0 15px #00ff41; }
    </style>
</head>
<body>
    <div class="text-center w-full max-w-lg p-4">
        <h1 class="text-4xl font-bold mb-2 tracking-widest glitch">CHAOS FORGE</h1>
        <p class="text-gray-500 mb-8 text-sm">Mint your eternal identity.</p>

        <div id="output" class="text-2xl mb-8 min-h-[40px] text-green-300 font-bold border-b border-gray-800 pb-2"></div>

        <button onclick="forge()" class="btn text-xl font-bold mb-4 w-full">
            GENERATE CALLSIGN
        </button>
        
        <button onclick="accept()" id="accept-btn" class="hidden btn w-full border-gray-700 text-gray-500 hover:border-white hover:text-white hover:bg-transparent hover:shadow-none">
            ACCEPT & BIND
        </button>

        <div class="mt-8 text-xs text-gray-600">
            <a href="/" class="hover:text-white">‚Üê Return to Void</a>
        </div>
    </div>

    <script>
        const words = ["VOID", "RAZOR", "THUNDER", "CRIMSON", "ABYSS", "NOVA", "ASH", "ONYX", "GHOST", "ECHO", "SHADOW", "PULSE"];
        let currentCallsign = "";

        function forge() {
            // Chaos Generator Logic
            const r1 = words[Math.floor(Math.random() * words.length)];
            const r2 = words[Math.floor(Math.random() * words.length)];
            const r3 = words[Math.floor(Math.random() * words.length)];
            const suffix = Math.floor(Math.random() * 99);
            
            currentCallsign = `${r1}-${r2}-${r3}-${suffix}`;
            
            // Glitch Effect
            const out = document.getElementById('output');
            let i = 0;
            const interval = setInterval(() => {
                out.innerText = Math.random().toString(36).substring(7).toUpperCase();
                i++;
                if(i > 10) {
                    clearInterval(interval);
                    out.innerText = currentCallsign;
                    out.classList.add('text-white');
                    document.getElementById('accept-btn').classList.remove('hidden');
                    document.getElementById('accept-btn').classList.add('block');
                }
            }, 50);
        }

        function accept() {
            if(!currentCallsign) return;
            // Save to Local Storage for the Login Page
            localStorage.setItem('callsign_history', currentCallsign);
            // Flash Success
            document.body.style.background = "#001100";
            setTimeout(() => {
                window.location.href = '/login';
            }, 500);
        }
    </script>
</body>
</html>
